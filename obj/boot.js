// Generated by CoffeeScript 1.4.0

/*1964js - JavaScript/HTML5 port of 1964 - N64 emulator
Copyright (C) 2012 Joel Middendorf

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
*/


/*globals C1964jsEmulator
*/


(function() {

  C1964jsEmulator.prototype.getTVSystem = function(countryCode) {
    "use strict";

    var system;
    system = void 0;
    switch (countryCode) {
      case 0:
        system = this.TV_SYSTEM_NTSC;
        break;
      case 0x37:
        system = this.TV_SYSTEM_NTSC;
        break;
      case 0x41:
        system = this.TV_SYSTEM_NTSC;
        break;
      case 0x44:
        system = this.TV_SYSTEM_PAL;
        break;
      case 0x45:
        system = this.TV_SYSTEM_NTSC;
        break;
      case 0x46:
        system = this.TV_SYSTEM_PAL;
        break;
      case "I":
        system = this.TV_SYSTEM_PAL;
        break;
      case 0x4A:
        system = this.TV_SYSTEM_NTSC;
        break;
      case 0x50:
        system = this.TV_SYSTEM_PAL;
        break;
      case 0x53:
        system = this.TV_SYSTEM_PAL;
        break;
      case 0x55:
        system = this.TV_SYSTEM_PAL;
        break;
      case 0x58:
        system = this.TV_SYSTEM_PAL;
        break;
      case 0x59:
        system = this.TV_SYSTEM_PAL;
        break;
      case 0x20:
      case 0x21:
      case 0x38:
      case 0x70:
        system = this.TV_SYSTEM_PAL;
        break;
      default:
        system = this.TV_SYSTEM_PAL;
    }
    return system;
  };

  C1964jsEmulator.prototype.getCIC = function() {
    "use strict";

    var CIC_CRC, cic, i;
    i = void 0;
    cic = 0;
    CIC_CRC = 0;
    i = 0;
    while (i < 0xFC0) {
      CIC_CRC = CIC_CRC + this.memory.romUint8Array[0x40 + i];
      i += 1;
    }
    switch (CIC_CRC) {
      case 0x33a27:
      case 0x3421e:
        this.log("Using CIC-NUS-6101 for starfox\n");
        cic = 0x3f;
        break;
      case 0x34044:
        this.log("Using CIC-NUS-6102 for mario\n");
        cic = 0x3f;
        break;
      case 0x357d0:
        this.log("Using CIC-NUS-6103 for Banjo\n");
        cic = 0x78;
        break;
      case 0x47a81:
        this.log("Using CIC-NUS-6105 for Zelda\n");
        cic = 0x91;
        break;
      case 0x371cc:
        this.log("Using CIC-NUS-6106 for F-Zero/Yoshi Story\n");
        cic = 0x85;
        break;
      case 0x343c9:
        this.log("Using Boot Code for F1 World Grand Prix\n");
        cic = 0x85;
        break;
      default:
        this.log("Unknown boot code, using Mario boot code instead");
        cic = 0x3f;
    }
    return cic;
  };

}).call(this);
